{% extends 'SGRapp/base.html' %}

{% block head_block %}
    <!-- DataTables CSS -->
    <!-- <link rel="stylesheet" type="text/css" href="//cdn.datatables.net/1.10.7/css/jquery.dataTables.css"> -->
    <!-- <link rel="stylesheet" type="text/css" href="//netdna.bootstrapcdn.com/bootstrap/3.0.3/css/bootstrap.min.css"> -->
    <!-- <link rel="stylesheet" type="text/css" href="//cdn.datatables.net/plug-ins/1.10.7/integration/bootstrap/3/dataTables.bootstrap.css"> -->

    <!-- jQuery -->
    <script type="text/javascript" charset="utf8" src="//code.jquery.com/jquery-1.10.2.min.js"></script>

    <!-- DataTables -->
    <script type="text/javascript" charset="utf8" src="//cdn.datatables.net/1.10.7/js/jquery.dataTables.js"></script>
    <script type="text/javascript" charset="utf8" src="//cdn.datatables.net/plug-ins/1.10.7/integration/bootstrap/3/dataTables.bootstrap.js"></script>

    <script type="text/javascript" charset="utf-8">
    $(document).ready( function () {
        var t = $('#gamesTable').DataTable( {
            "columnDefs": [ {
                "searchable": false,
                "orderable": false,
                "targets": 0
            } ],
            "columns": [
                {"width": "20px", "searchable": false, "orderable": false},
                {"width": "75px"},
                null,
                {"width": "90px"},
                {"width": "90px"},
                {"width": "110px"},
                {"width": "110px"}
            ],
            "pageLength": 50,
            "lengthMenu": [ [10, 25, 50, -1], [10, 25, 50, "All"] ],
            "order": [[6, 'desc'], [5, 'desc']]
        } );

        t.on( 'order.dt search.dt', function () {
            t.column(0, {search:'applied', order:'applied'}).nodes().each( function (cell, i) {
                cell.innerHTML = i+1;
            } );
        } ).draw();
    } );
    </script>
{% endblock %}


{% block body_block %}
    <div class="container">
        <div class="jumbotron">
            <div class="row">
                <div class="col-xs-12 col-sm-2">
                    <table class="margin-auto">
                        <tr><td>
                            <img src="{{ avatarImg }}" class="img-thumbnail" id="avatar"/>
                        </td></tr>
                    </table>
                </div>
                <div class="col-xs-12 col-sm-2">
                    <table class="info-table">
                        <tr id="info-th"><th><a href="http://steamcommunity.com/profiles/{{ steamId }}/">{{ steamName }}</a></th></tr>
                        <tr id="info-td"><td>Level {{ steamLevel }}</td></tr>
                        <tr id="info-td"><td>{{ games|length }} games</td></tr>
                    </table>
                </div>
            </div>
        </div>
    </div>


    <div class="container">
    <table id="gamesTable" class="table table-striped table-bordered" cellspacing="0" width="100%">
        <thead>
            <tr>
                <td>#</td>
                <td>App ID</td>
                <td>Name</td>
                <td>(+)</td>
                <td>(-)</td>
                <td>User Rating</td>
                <td>Wilson</td>
            </tr>
        </thead>
        <tbody>
            {% for game in games %}
                <tr>
                    <td></td>
                    <td><a href="http://store.steampowered.com/app/{{ game.appid }}">{{ game.appid }}</a></td>
                    <td>{{ game.name }}</td>
                    <td class="col-pos">{{ game.positive }}</td>
                    <td class="col-neg">{{ game.negative }}</td>
                    <td>{{ game.rating }}%</td>
                    <td>{{ game.wilson }}%</td>
                </tr>
            {% endfor %}
        </tbody>
    </table>
    </div>
{% endblock %}